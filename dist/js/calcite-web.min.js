/*!
 * Calcite Web - Calcite Design Components in CSS, JS and HTML
 * @version v1.0.0
 * @license Apache-2.0
 * @copyright 2018 Esri
 * @link https://github.com/Esri/calcite-web
 */(function(a,b){'object'==typeof exports&&'undefined'!=typeof module?module.exports=b():'function'==typeof define&&define.amd?define(b):a.calcite=b()})(this,function(){'use strict';function a(a,b){var c;for(c=b;c;c=c.parentNode){var d=new RegExp('(\\s|^)'+a+'(\\s|$)').test(c.getAttribute('class'));if(1===c.nodeType&&d)break}return c}function b(a){return Array.isArray(a)?a:Array.prototype.slice.call(a)}function c(a,c){var d=c||document,e=d.querySelectorAll(a);return b(e)}function d(a,b){var c=b.filter(function(b){var c=a.toLowerCase(),d=b.innerHTML.toLowerCase();return-1!==d.indexOf(c)});return c}function f(a,b){return new RegExp('(\\s|^)'+b+'(\\s|$)').test(a.getAttribute('class'))}function e(a,b){b.split(' ').forEach(function(b){if(!f(a,b)){var c=a.getAttribute('class')||'';a.setAttribute('class',c+' '+b)}})}function g(a,b){b.split(' ').forEach(function(b){var c=(a.getAttribute('class')||'').replace(new RegExp('(\\s|^)'+b+'(\\s|$)','g'),'$2');f(a,b)&&a.setAttribute('class',c)})}function h(a,b){f(a,b)?g(a,b):e(a,b)}function i(a){a=b(a),a.forEach(function(a){g(a,'is-active')})}function j(a,b){i(a),e(b,'is-active')}function k(a){a.forEach(function(a){a&&a.setAttribute('aria-hidden',!0)})}function l(a){a.forEach(function(a){a&&a.removeAttribute('aria-hidden')})}function m(a){if(a){var b=a.getAttribute('aria-expanded');b?a.removeAttribute('aria-expanded'):a.setAttribute('aria-expanded','true')}}function n(){return'click'}function o(a,b,c){if(a.addEventListener)return a.addEventListener(b,c,!1);return a.attachEvent?a.attachEvent('on'+b,c):void 0}function p(a,b,c){if(a.removeEventListener)return a.removeEventListener(b,c,!1);return a.detachEvent?a.detachEvent('on'+b,c):void 0}function q(a){return a.target||a.srcElement}function r(a){return a.preventDefault?a.preventDefault():void(a.returnValue&&(a.returnValue=!1))}function s(a){return a=a||window.event,a.stopPropagation?a.stopPropagation():void(a.cancelBubble&&(a.cancelBubble=!0))}function t(a,b,c){var d,e,f,g;return g=function(){d=!1,e&&(f.apply(c,e),e=!1)},f=function(){d?e=arguments:(a.apply(c,arguments),setTimeout(g,b),d=!0)},f}function u(){}function v(b){s(b);var c=a('accordion-section',q(b));X.emit('accordion:toggle',{node:c})}function w(a){h(a.node,'is-active'),m(a.node)}function x(a){13===a.keyCode&&f(q(a),'accordion-title')&&v(a)}function y(a){var b=c('.js-accordion');a?z(a.node):b.forEach(function(a){z(a)})}function z(a){a.setAttribute('aria-live','polite'),a.setAttribute('role','tablist'),b(a.children).forEach(function(a){var b=a.querySelector('.accordion-title');b.setAttribute('role','tab'),b.setAttribute('tabindex','0'),f(a,'is-active')&&a.setAttribute('aria-expanded','true');var c=!1;W.accordions.forEach(function(a){a.target===b&&a.event===n()&&a.fn===v&&(c=!0)}),c||(W.accordions.push({target:b,event:n(),fn:v}),W.accordions.push({target:a,event:'keyup',fn:x}),o(b,n(),v),o(a,'keyup',x))})}function A(){X.on('accordion:bind',y),X.on('accordion:toggle',w),Y=!0}function B(){Y||A(),X.emit('accordion:bind')}function C(){p(document.body,n(),C),c('.js-dropdown').forEach(function(a){g(a,'is-active')}),c('.js-dropdown-toggle').forEach(function(a){a.setAttribute('aria-expanded','false')}),p(document,'keydown',E)}function D(a){if(a){var b=f(a.node,'is-active');X.emit('dropdown:close'),b||(e(a.node,'is-active'),a.target&&a.target.setAttribute('aria-expanded','true'),o(document,'keydown',E)),f(a.node,'is-active')&&o(document.body,n(),C)}}function E(a){40===a.keyCode|38===a.keyCode&&a.preventDefault()}function F(){var a=c('.js-dropdown-toggle');a.forEach(function(a){var b=!1;W.dropdowns.forEach(function(c){c.target===a&&c.event===n()&&c.fn===K&&(b=!0)}),b||(W.dropdowns.push({target:a,event:n(),fn:K}),o(a,n(),K))})}function G(){var a=document.querySelector('.js-dropdown.is-active');return!!a&&a}function H(a){var b=document.activeElement,c=a.links.indexOf(b);-1===c?a.forward?c=0:c=a.links.length-1:a.forward?(c+=1,c===a.links.length&&(c=0)):(c-=1,-1==c&&(c=a.links.length-1)),a.links[c].focus()}function I(){var a=G();if(a){var b=c('.dropdown-link',a);X.emit('dropdown:focus',{links:b,forward:!0})}}function J(){var a=G();if(a){var b=c('.dropdown-link',a);X.emit('dropdown:focus',{links:b,forward:!1})}}function K(b){r(b),s(b);var c=a('js-dropdown',b.target);X.emit('dropdown:toggle',{node:c,target:b.target})}function L(){X.on('dropdown:toggle',D),X.on('dropdown:close',C),X.on('keyboard:escape',C),X.on('keyboard:arrow:down',I),X.on('keyboard:arrow:up',J),X.on('dropdown:focus',H),Z=!0}function M(){Z||L(),F()}function N(){function b(a){if(!a)t.forEach(function(a){a.removeAttribute('tabindex'),g(a,'is-active')});else{var b=document.querySelector('.js-drawer[data-drawer="'+a.id+'"]');b.removeAttribute('tabindex'),g(b,'is-active')}l([m,q]),p(document,'focusin',d),g(document.documentElement,'drawer-no-overflow'),j&&j.focus()}function d(b){a('js-drawer',b.target)||t.forEach(function(a){f(a,'is-active')&&a.focus()})}function h(a){f(a.target,'js-drawer')&&X.emit('drawer:close')}function i(a){r(a);var b=a.target.getAttribute('data-drawer');X.emit('drawer:open',{id:b})}var j,m=document.querySelector('.wrapper'),q=document.querySelector('.footer'),s=c('.js-drawer-toggle'),t=c('.js-drawer');X.on('drawer:open',function(a){X.emit('drawer:close');var b=document.querySelector('.js-drawer[data-drawer="'+a.id+'"]');b.setAttribute('tabindex',0),e(b,'is-active'),e(document.documentElement,'drawer-no-overflow'),k([m,q]),o(b,n(),h),o(document,'focusin',d)}),X.on('keyboard:escape',b),X.on('drawer:close',b),X.on('drawer:bind',function(a){a?o(a.node,n(),i):s.forEach(function(a){o(a,n(),i)})}),X.emit('drawer:bind')}function O(){function j(b){var c=a('js-filter-dropdown',b.target);return{parent:c,id:c.getAttribute('data-filter-dropdown'),item:b.target}}function k(a){s(a);var b=j(a);X.emit('filterDropdown:input:focus',b)}function l(a){r(a),s(a);var b=j(a);X.emit('filterDropdown:select',b)}function m(a){a.preventDefault();var b=j(a);h(a.target,'is-active'),X.emit('filterDropdown:toggle',b)}function p(){var a=document.querySelectorAll('.filter-dropdown-list');i(a);var b=c('.js-filter-dropdown-open'),d=c('.js-filter-dropdown-close');b.forEach(function(a){return e(a,'is-active')}),d.forEach(function(a){return g(a,'is-active')})}function q(a){a.preventDefault();var b=j(a);b.i=a.target.getAttribute('data-item-id'),X.emit('filterDropdown:select:remove',b)}X.on('filterDropdown:bind',function(){var a=c('.js-filter-dropdown');a.forEach(function(a){var c=a.getAttribute('data-filter-dropdown'),f=a.querySelector('.filter-dropdown-input');o(f,'focus',k);for(var h,j=a.querySelectorAll('.js-filter-dropdown-open'),p=0;p<j.length;p++)h=j[p],h.setAttribute('data-id',c),o(h,n(),m);for(var i,q=a.querySelectorAll('.js-filter-dropdown-close'),r=0;r<q.length;r++)i=q[r],i.setAttribute('data-id',c),o(i,n(),m);for(var s,t=a.querySelectorAll('.filter-dropdown-link'),u=0;u<t.length;u++)s=t[u],s.setAttribute('data-item-id',u),o(s,n(),l);o(f,'keyup',function(){var a=b(t);a.forEach(function(a){e(a,'hide')}),d(f.value,a).forEach(function(a){g(a,'hide')})})})}),X.on('filterDropdown:select',function(a){h(a.item,'is-active')}),X.on('filterDropdown:select',function(a){var b=a.parent.querySelectorAll('.filter-dropdown-link.is-active'),c={parent:a.parent,id:a.id,active:b};X.emit('filterDropdown:active',c)}),X.on('filterDropdown:select:remove',function(a){var b=a.parent.querySelectorAll('.filter-dropdown-link.is-active'),c=b[a.i];g(c,'is-active');var d=a.parent.querySelectorAll('.filter-dropdown-link.is-active'),e={parent:a.parent,id:a.id,active:d};X.emit('filterDropdown:active',e)}),X.on('filterDropdown:active',function(a){X.emit('filterDropdown:active:clear',a);var b=a.parent.querySelector('.js-flilter-dropdown-no-filters');0<a.active.length?e(b,'hide'):g(b,'hide');for(var c=0;c<a.active.length;c++){var d=a.active[c],f='<span class="filter-dropdown-active">\n        '+d.innerHTML+'\n        <a class="filter-dropdown-remove" href="#" data-item-id=\''+c+'\'>\n          <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 32 32" class="svg-icon"><path d="M18.404 16l9.9 9.9-2.404 2.404-9.9-9.9-9.9 9.9L3.696 25.9l9.9-9.9-9.9-9.898L6.1 3.698l9.9 9.899 9.9-9.9 2.404 2.406-9.9 9.898z"/></svg>\n        </a>\n      </span>';a.parent.insertAdjacentHTML('beforeend',f);var h=a.parent.querySelector('.filter-dropdown-remove[data-item-id="'+c+'"]');o(h,n(),q)}}),X.on('filterDropdown:active:clear',function(a){for(var b=a.parent.querySelectorAll('.filter-dropdown-active'),c=0;c<b.length;c++)a.parent.removeChild(b[c])}),X.on('filterDropdown:toggle',function(a){var b=a.parent.querySelector('.filter-dropdown-list');f(b,'is-active')?X.emit('filterDropdown:close',a):X.emit('filterDropdown:open',a)}),X.on('filterDropdown:open',function(a){p();var b=a.parent.querySelector('.filter-dropdown-list');e(b,'is-active');var d=c('.js-filter-dropdown-close',a.parent),f=c('.js-filter-dropdown-open',a.parent);f.forEach(function(a){return g(a,'is-active')}),d.forEach(function(a){return e(a,'is-active')})}),X.on('filterDropdown:close',p),X.on('keyboard:escape',p),X.emit('filterDropdown:bind')}function P(){function a(){var a=[];return t&&a.push(t),u&&a.push(u),a}function b(b){if(X.emit('modal:close'),b&&b.id){var d=document.querySelector('.js-modal[data-modal="'+b.id+'"]');d.removeAttribute('tabindex'),o(document,'keydown',h),e(d,'is-active'),e(s,'drawer-no-overflow'),k(a());var f=c('button, [href], input, select, textarea, [tabindex]',d).filter(function(a){return!a.disabled&&-1!==a.tabIndex&&0<a.offsetHeight});m=f.shift(),q=f.pop(),m&&m.focus()}}function d(b){if(f(s,'drawer-no-overflow')&&g(s,'drawer-no-overflow'),!b)return i(w);var c=document.querySelector('.js-modal[data-modal="'+b.id+'"]');g(c,'is-active'),c.setAttribute('tabindex',0),p(document,'keydown',h),l(a())}function h(a){var b='Tab'===a.key||9===a.keyCode;b&&(a.shiftKey?document.activeElement===m&&(q&&q.focus(),a.preventDefault()):document.activeElement===q&&(m&&m.focus(),a.preventDefault()))}function j(a){r(a);var b=a.target.getAttribute('data-modal');X.emit('modal:open',{id:b})}var m,q,s=document.documentElement,t=document.querySelector('.wrapper'),u=document.querySelector('.footer'),v=c('.js-modal-toggle'),w=c('.js-modal');X.on('modal:open',b),X.on('keyboard:escape',d),X.on('modal:close',d),X.on('modal:bind',function(a){a?o(a,n(),j):v.forEach(function(a){o(a,n(),j)})}),X.emit('modal:bind')}function Q(){function a(a){var b=a.querySelector('.js-search-icon'),c=a.querySelector('.js-close-icon');h(b,'hide'),h(c,'hide'),h(i,'is-active'),h(document.body,'overflow-hidden'),X.emit('search:focus')}function d(a){r(a),X.emit('search:toggle',a.target)}var e=c('.js-search-toggle'),i=c('.js-search')[0];X.on('search:bind',function(a){a?o(a,n(),d):e.forEach(function(a){o(a,n(),d)})}),X.on('search:toggle',a),X.on('keyboard:escape',function(){if(f(i,'is-active')){g(i,'is-active'),g(document.body,'overflow-hidden');var c=b(e);c.forEach(a);var d=document.querySelector('.js-search-input');d&&d.blur()}}),X.on('search:focus',function(){var a=document.querySelector('.js-search-input');a.focus()}),X.emit('search:bind')}function R(){function a(a){window.location.assign(a.currentTarget.value)}X.on('selectnav:bind',function(){b.forEach(function(b){o(b,'change',a)})});var b=c('.js-select-nav');X.emit('selectnav:bind')}function S(a){for(var b='',c=0;c<a;c++)b+=(0|65536*(1+Math.random())).toString(16).substring(1);return b}function T(a){if(!a)throw new TypeError('Invalid argument `value` has no value.');this.value=T.EMPTY,a&&a instanceof T?this.value=a.toString():a&&'[object String]'===Object.prototype.toString.call(a)&&T.isGuid(a)&&(this.value=a),this.equals=function(a){return T.isGuid(a)&&this.value===a},this.isEmpty=function(){return this.value===T.EMPTY},this.toString=function(){return this.value},this.toJSON=function(){return this.value}}function U(){function a(a){var b=T.raw();a.setAttribute('data-sticky-id',b);var c=a.parentNode,d=a.cloneNode('deep');e(d,'js-shim'),g(d,'js-sticky'),d.setAttribute('data-sticky-id',b),d.style.visibility='hidden',d.style.display='none',c.insertBefore(d,a)}X.on('scrolling:at',function(a){d.forEach(function(b){var c=b.element;if(f(b.element,'is-sticky')){var d=b.element.getAttribute('data-sticky-id');c=document.querySelector('.js-shim[data-sticky-id="'+d+'"]')}if(c){var e=c.getAttribute('data-top')||0;b.top=c.offsetTop-parseInt(e,0)}b.top<a?X.emit('sticky:stick',b):X.emit('sticky:unstick',b)})}),X.on('sticky:stick',function(a){var b=a.element.getAttribute('data-sticky-id'),c=document.querySelector('.js-shim[data-sticky-id="'+b+'"]');b&&c&&(e(a.element,'is-sticky'),c.style.display='')}),X.on('sticky:unstick',function(a){var b=a.element.getAttribute('data-sticky-id'),c=document.querySelector('.js-shim[data-sticky-id="'+b+'"]');b&&c&&(g(a.element,'is-sticky'),c.style.display='none')});var b=c('.js-sticky'),d=b.map(function(b){var c=b.offsetTop,d=b.getAttribute('data-top')||0;b.style.top=d+'px';var e=b.getAttribute('data-sticky-id');return e||a(b),{top:c-parseInt(d,0),element:b}})}function V(){function d(a){var b=a.getAttribute('data-tab');if(b)return b;var c=T.raw();return a.setAttribute('data-tab',c),c}function g(b){var c=b.target;f(c,'tab-title')||(c=b.currentTarget);var e=a('js-tab-group',c),g=d(e);return{parent:e,id:g,active:c}}function e(a){a.preventDefault();var b=g(a);X.emit('tabs:active',b)}function h(a){var b=g(a);13===a.keycode&&X.emit('tabs:active',b)}X.on('tabs:bind',function(){var a=c('.js-tab'),b=c('.js-tab-group'),g=c('.js-tab-section');b.forEach(function(a){a.setAttribute('aria-live','polite'),d(a),a.children[0].setAttribute('role','tablist');for(var b=a.querySelectorAll('.js-tab'),c=100/b.length,e=0;e<b.length;e++)b[e].style.maxWidth=c+'%'}),a.forEach(function(a){a.setAttribute('aria-expanded','false'),a.setAttribute('role','tab'),a.setAttribute('tabindex','0'),o(a,n(),e),o(a,'keyup',h)}),g.forEach(function(a){a.setAttribute('role','tabpanel');var b=f(a,'is-active');b?a.setAttribute('aria-expanded',!0):a.setAttribute('aria-expanded',!1)})}),X.on('tabs:active',function(a){var c=a.parent,d=b(c.querySelectorAll('.js-tab')),e=a.active,f=b(c.querySelectorAll('.js-tab-section')),g=d.indexOf(e),h=f[g];d.forEach(function(a){a.setAttribute('aria-expanded',!1)}),e.setAttribute('aria-expanded',!0),j(d,e),f.forEach(function(a){a.setAttribute('aria-expanded',!1)}),h.setAttribute('aria-expanded',!0),j(f,h)}),X.emit('tabs:bind')}var W={dropdowns:[],accordions:[]};u.prototype={on:function(a,b,c){var d=this.e||(this.e={});return(d[a]||(d[a]=[])).push({fn:b,ctx:c}),this},once:function(a,b,c){function d(){e.off(a,d),b.apply(c,arguments)}var e=this;return d._=b,this.on(a,d,c)},emit:function(a){var b=[].slice.call(arguments,1),c=((this.e||(this.e={}))[a]||[]).slice(),d=0,e=c.length;for(d;d<e;d++)c[d].fn.apply(c[d].ctx,b);return this},off:function(a,b){var c=this.e||(this.e={}),d=c[a],e=[];if(d&&b)for(var f=0,g=d.length;f<g;f++)d[f].fn!==b&&d[f].fn._!==b&&e.push(d[f]);return e.length?c[a]=e:delete c[a],this}};var X=new u,Y=!1,Z=!1,$=/^[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$/i;T.EMPTY='00000000-0000-0000-0000-000000000000',T.isGuid=function(a){return a&&(a instanceof T||$.test(a.toString()))},T.create=function(){return new T([S(2),S(1),S(1),S(1),S(3)].join('-'))},T.raw=function(){return[S(2),S(1),S(1),S(1),S(3)].join('-')},o(document,'keyup',function(a){27===a.keyCode?X.emit('keyboard:escape'):13===a.keyCode?X.emit('keyboard:return'):32===a.keyCode?X.emit('keyboard:space'):38===a.keyCode?X.emit('keyboard:arrow:up'):40===a.keyCode?X.emit('keyboard:arrow:down'):37===a.keyCode?X.emit('keyboard:arrow:left'):39===a.keyCode&&X.emit('keyboard:arrow:right')}),o(window,'scroll',t(function(){X.emit('scrolling:at',window.pageYOffset)},100));var _=[B,function(){function a(a){a.preventDefault();var b=a.target.getAttribute('data-clipboard-target');document.querySelector(b).select(),document.execCommand('copy')}var b=c('.js-copy-to-clipboard');X.on('clipboard:bind',function(c){c?o(c.node,'click',a):b.forEach(function(b){o(b,'click',a)})}),X.emit('clipboard:bind')},M,N,O,P,Q,R,U,V];return{version:'1.0.0',click:n,addEvent:o,removeEvent:p,eventTarget:q,preventDefault:r,stopPropagation:s,throttle:t,hasClass:f,addClass:e,removeClass:g,toggleClass:h,removeActive:i,addActive:function(a){a=b(a),a.forEach(function(a){e(a,'is-active')})},toggleActive:j,toggleAriaHidden:function(a){a.forEach(function(a){if(a){var b=a.getAttribute('aria-hidden');'true'===b?a.removeAttribute('aria-hidden'):a.setAttribute('aria-hidden',!0)}})},toggleAriaExpanded:m,closest:a,nodeListToArray:b,findElements:c,bus:X,accordion:B,dropdown:M,drawer:N,filterDropdown:O,modal:P,search:Q,selectNav:R,sticky:U,tabs:V,extend:function(a){for(var b in'function'!=typeof Object.assign&&(Object.assign=function(a){var b=arguments;if(null==a)throw new TypeError('Cannot convert undefined or null to object');a=Object(a);for(var c,d=1;d<arguments.length;d++)if(c=b[d],null!=c)for(var e in c)Object.prototype.hasOwnProperty.call(c,e)&&(a[e]=c[e]);return a}),a)_.push(a[b]);Object.assign(this,a)},init:function(){_.forEach(function(a){a()})}}});
